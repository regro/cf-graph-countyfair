{
  "archived": false,
  "branch": "main",
  "ci_support_linux_64_.yaml": "c_compiler:\n- gcc\nc_compiler_version:\n- '14'\nc_stdlib:\n- sysroot\nc_stdlib_version:\n- '2.17'\nchannel_sources:\n- conda-forge\nchannel_targets:\n- conda-forge main\ndocker_image:\n- quay.io/condaforge/linux-anvil-x86_64:alma9\ntarget_platform:\n- linux-64\nzstd:\n- '1.5'\n",
  "conda-forge.yml": {
    "build_platform": {
      "linux_aarch64": "linux_64",
      "linux_ppc64le": "linux_64",
      "osx_arm64": "osx_64"
    },
    "conda_build": {
      "error_overlinking": true
    },
    "conda_build_tool": "rattler-build",
    "conda_forge_output_validation": true,
    "conda_install_tool": "pixi",
    "github": {
      "branch_name": "main",
      "tooling_branch_name": "main"
    },
    "provider": {
      "linux_aarch64": "default",
      "linux_ppc64le": "default",
      "osx_arm64": "default"
    },
    "test": "all"
  },
  "feedstock_hash": "b6e889ea0fa5725de8ff5541f82a717be48b92c3",
  "feedstock_hash_ts": 1766742690,
  "feedstock_name": "ocaml",
  "hash_type": "sha256",
  "linux_64_meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "sysroot_linux-aarch64 2.17.*",
            "sysroot_linux-ppc64le 2.17.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "sysroot_linux-64 >=2.17",
                "sysroot_linux-aarch64 >=2.17",
                "sysroot_linux-ppc64le >=2.17",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "sysroot_linux-aarch64 2.17.*",
        "sysroot_linux-ppc64le 2.17.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "linux_64_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "file",
        "findutils",
        "gawk",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "make",
        "pkgconfig",
        "sed",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "file",
        "gcc_impl_linux-64",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le",
        "sysroot_linux-64",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    }
  },
  "linux_aarch64_meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "sysroot_linux-aarch64 2.17.*",
            "sysroot_linux-ppc64le 2.17.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "sysroot_linux-64 >=2.17",
                "sysroot_linux-aarch64 >=2.17",
                "sysroot_linux-ppc64le >=2.17",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "sysroot_linux-aarch64 2.17.*",
        "sysroot_linux-ppc64le 2.17.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "linux_aarch64_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "file",
        "findutils",
        "gawk",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "make",
        "pkgconfig",
        "sed",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "file",
        "gcc_impl_linux-64",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le",
        "sysroot_linux-64",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    }
  },
  "linux_ppc64le_meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "sysroot_linux-aarch64 2.17.*",
            "sysroot_linux-ppc64le 2.17.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "sysroot_linux-64 >=2.17",
                "sysroot_linux-aarch64 >=2.17",
                "sysroot_linux-ppc64le >=2.17",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "sysroot_linux-aarch64 2.17.*",
        "sysroot_linux-ppc64le 2.17.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "linux_ppc64le_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "file",
        "findutils",
        "gawk",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "make",
        "pkgconfig",
        "sed",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "file",
        "gcc_impl_linux-64",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le",
        "sysroot_linux-64",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    }
  },
  "meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "sysroot_linux-aarch64 2.17.*",
            "sysroot_linux-ppc64le 2.17.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "sysroot_linux-64 >=2.17",
                "sysroot_linux-aarch64 >=2.17",
                "sysroot_linux-ppc64le >=2.17",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      },
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "sysroot_linux-aarch64 2.17.*",
            "sysroot_linux-ppc64le 2.17.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "sysroot_linux-64 >=2.17",
                "sysroot_linux-aarch64 >=2.17",
                "sysroot_linux-ppc64le >=2.17",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      },
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "sysroot_linux-aarch64 2.17.*",
            "sysroot_linux-ppc64le 2.17.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "sysroot_linux-64 >=2.17",
                "sysroot_linux-aarch64 >=2.17",
                "sysroot_linux-ppc64le >=2.17",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      },
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "clang_impl_linux-aarch64 19.*",
            "clang_impl_linux-ppc64le 19.*",
            "macosx_deployment_target_linux-aarch64 11.0.*",
            "macosx_deployment_target_linux-ppc64le 11.0.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "clang_impl_linux-aarch64 19.*",
                "clang_impl_linux-ppc64le 19.*",
                "macosx_deployment_target_linux-64 >=11.0",
                "macosx_deployment_target_linux-aarch64 >=11.0",
                "macosx_deployment_target_linux-ppc64le >=11.0",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      },
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "clang_impl_linux-aarch64 19.*",
            "clang_impl_linux-ppc64le 19.*",
            "macosx_deployment_target_linux-aarch64 11.0.*",
            "macosx_deployment_target_linux-ppc64le 11.0.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "clang_impl_linux-aarch64 19.*",
                "clang_impl_linux-ppc64le 19.*",
                "macosx_deployment_target_linux-64 >=11.0",
                "macosx_deployment_target_linux-aarch64 >=11.0",
                "macosx_deployment_target_linux-ppc64le >=11.0",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      },
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "m2w64-sysroot_linux-aarch64 12.*",
            "m2w64-sysroot_linux-ppc64le 12.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "m2w64-sysroot_linux-64 >=12",
                "m2w64-sysroot_linux-aarch64 >=12",
                "m2w64-sysroot_linux-ppc64le >=12",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "sysroot_linux-aarch64 2.17.*",
        "sysroot_linux-ppc64le 2.17.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "clang_impl_linux-aarch64 19.*",
        "clang_impl_linux-ppc64le 19.*",
        "macosx_deployment_target_linux-aarch64 11.0.*",
        "macosx_deployment_target_linux-ppc64le 11.0.*",
        "m2w64-sysroot_linux-aarch64 12.*",
        "m2w64-sysroot_linux-ppc64le 12.*"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "name": "ocaml",
  "osx_64_meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "clang_impl_linux-aarch64 19.*",
            "clang_impl_linux-ppc64le 19.*",
            "macosx_deployment_target_linux-aarch64 11.0.*",
            "macosx_deployment_target_linux-ppc64le 11.0.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "clang_impl_linux-aarch64 19.*",
                "clang_impl_linux-ppc64le 19.*",
                "macosx_deployment_target_linux-64 >=11.0",
                "macosx_deployment_target_linux-aarch64 >=11.0",
                "macosx_deployment_target_linux-ppc64le >=11.0",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "clang_impl_linux-aarch64 19.*",
        "clang_impl_linux-ppc64le 19.*",
        "macosx_deployment_target_linux-aarch64 11.0.*",
        "macosx_deployment_target_linux-ppc64le 11.0.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "osx_64_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "clang_impl_linux-aarch64",
        "clang_impl_linux-ppc64le",
        "file",
        "findutils",
        "gawk",
        "grep",
        "macosx_deployment_target_linux-aarch64",
        "macosx_deployment_target_linux-ppc64le",
        "make",
        "pkgconfig",
        "sed"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "clang_impl_linux-64",
        "clang_impl_linux-aarch64",
        "clang_impl_linux-ppc64le",
        "file",
        "grep",
        "macosx_deployment_target_linux-64",
        "macosx_deployment_target_linux-aarch64",
        "macosx_deployment_target_linux-ppc64le",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le"
      ]
    }
  },
  "osx_arm64_meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "clang_impl_linux-aarch64 19.*",
            "clang_impl_linux-ppc64le 19.*",
            "macosx_deployment_target_linux-aarch64 11.0.*",
            "macosx_deployment_target_linux-ppc64le 11.0.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "clang_impl_linux-64 >=19",
                "clang_impl_linux-aarch64 19.*",
                "clang_impl_linux-ppc64le 19.*",
                "macosx_deployment_target_linux-64 >=11.0",
                "macosx_deployment_target_linux-aarch64 >=11.0",
                "macosx_deployment_target_linux-ppc64le >=11.0",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "clang_impl_linux-aarch64 19.*",
        "clang_impl_linux-ppc64le 19.*",
        "macosx_deployment_target_linux-aarch64 11.0.*",
        "macosx_deployment_target_linux-ppc64le 11.0.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "osx_arm64_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "clang_impl_linux-aarch64",
        "clang_impl_linux-ppc64le",
        "file",
        "findutils",
        "gawk",
        "grep",
        "macosx_deployment_target_linux-aarch64",
        "macosx_deployment_target_linux-ppc64le",
        "make",
        "pkgconfig",
        "sed"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "clang_impl_linux-64",
        "clang_impl_linux-aarch64",
        "clang_impl_linux-ppc64le",
        "file",
        "grep",
        "macosx_deployment_target_linux-64",
        "macosx_deployment_target_linux-aarch64",
        "macosx_deployment_target_linux-ppc64le",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le"
      ]
    }
  },
  "outputs_names": {
    "__set__": true,
    "elements": [
      "ocaml"
    ]
  },
  "parsing_error": false,
  "platforms": [
    "linux_64",
    "linux_aarch64",
    "linux_ppc64le",
    "osx_64",
    "osx_arm64",
    "win_64"
  ],
  "pr_info": {
    "__lazy_json__": "pr_info/ocaml.json"
  },
  "raw_meta_yaml": "context:\n  name: ocaml\n  version: 5.3.0\n  flexdll_version: 0.44\n  arm64_sdk: 11.0\n  m2: ${{ \"m2-\" if not unix }}\n  library: ${{ \"Library/\" if not unix }}\n  sh: ${{ \"sh\" if unix else \"bat\" }}\n  so: ${{ \"so\" if unix else \"dll\" }}\n  \npackage:\n  name: ocaml\n  version: ${{ version }}\n\nsource:\n  - url: https://github.com/ocaml/ocaml/archive/refs/tags/${{ version }}.tar.gz\n    sha256: eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029\n  - if: win\n    then:\n      url: https://github.com/ocaml/flexdll/archive/refs/tags/${{ flexdll_version }}.tar.gz\n      sha256: b7c6a92286f1f3065324d51083dcb16eec436a4e6e3b8df7cf836b6d7a8b9491\n      target_directory: flexdll\n\nbuild:\n  number: 1\n  script:\n    env:\n      SKIP_MAKE_TESTS: 1\n      ARM64_SDK: ${{ arm64_sdk }}\n  dynamic_linking:\n    missing_dso_allowlist:\n      - if: linux\n        then:\n          - ld-linux-aarch64.${{ so }}.1  # PPC64LE cross-compiler\n          - ld64.${{ so }}.2              # AARCH64 cross-compiler\n      - if: osx\n        then:\n          - /usr/lib/libSystem.B.dylib\n      - if: not unix\n        then:\n          - C:/Windows/system32/SHLWAPI.dll\n          - C:/Windows/system32/VERSION.dll\n  prefix_detection:\n    force_file_type:\n      text:\n        # These are actual text files that need prefix relocation\n        - lib/ocaml/ld.conf\n        - lib/ocaml/Makefile.config\n        - lib/ocaml/runtime-launch-info\n        - ocaml-cross-compilers/*/lib/ocaml/ld.conf\n        - ocaml-cross-compilers/*/lib/ocaml/Makefile.config\n        - ocaml-cross-compilers/*/lib/ocaml/runtime-launch-info\n    ignore:\n      # Only ignore bytecode files (binary format, relocation corrupts them)\n      - lib/ocaml/**/*.cmo\n      - lib/ocaml/**/*.cma\n      - lib/ocaml/**/*.cmi\n      - lib/ocaml/**/*.cmx\n      - lib/ocaml/**/*.cmt\n      - lib/ocaml/**/*.cmti\n      # Bytecode executables - MUST ignore to avoid corrupting binary data\n      # These use #!/usr/bin/env ocamlrun shebang which doesn't need relocation\n      - bin/ocaml\n      - bin/ocamlc.byte\n      - bin/ocamlcmt\n      - bin/ocamlcp\n      - bin/ocamldebug\n      - bin/ocamldoc\n      - bin/ocamldep.byte\n      - bin/ocamllex.byte\n      - bin/ocamlmklib\n      - bin/ocamlmktop\n      - bin/ocamlobjinfo.byte\n      - bin/ocamlopt.byte\n      - bin/ocamloptp\n      - bin/ocamlprof\n      - if: (linux or osx) and x86_64\n        then:\n          - ocaml-cross-compilers/*/lib/ocaml/**/*.cmo\n          - ocaml-cross-compilers/*/lib/ocaml/**/*.cma\n          - ocaml-cross-compilers/*/lib/ocaml/**/*.cmi\n          - ocaml-cross-compilers/*/lib/ocaml/**/*.cmx\n          - ocaml-cross-compilers/*/lib/ocaml/**/*.cmt\n          - ocaml-cross-compilers/*/lib/ocaml/**/*.cmti\n\nrequirements:\n  run_exports:\n    - ${{ pin_subpackage(\"ocaml\", upper_bound=\"x.x.x\") }}\n  build:\n    - ${{ compiler('c') }}\n    - ${{ stdlib('c') }}\n    - ${{ m2 }}bash >=5.2\n    - ${{ m2 }}file\n    - ${{ m2 }}findutils\n    - ${{ m2 }}gawk\n    - ${{ m2 }}grep\n    - ${{ m2 }}make\n    - ${{ m2 }}sed\n    - binutils\n    - pkgconfig\n    - if: linux and x86_64\n      then:\n        - ${{ c_compiler }}_impl_linux-aarch64 ${{ c_compiler_version }}.*\n        - ${{ c_compiler }}_impl_linux-ppc64le ${{ c_compiler_version }}.*\n        - ${{ c_stdlib }}_linux-aarch64 =${{ c_stdlib_version }}\n        - ${{ c_stdlib }}_linux-ppc64le =${{ c_stdlib_version }}\n        - binutils_impl_linux-aarch64\n        - binutils_impl_linux-ppc64le\n    - if: osx and x86_64\n      then:\n        - ${{ c_compiler }}_impl_osx-arm64 ${{ c_compiler_version }}.*\n        - ${{ c_stdlib }}_osx-arm64 =${{ arm64_sdk }}\n    - if: not unix\n      then:\n        - ${{ m2 }}coreutils\n        - ${{ m2 }}diffutils\n        - ${{ m2 }}which\n    - if: aarch64 or ppc64le or arm64\n      then:\n        # - ocaml >=5.3\n        - zstd\n    - if: osx\n      then:\n        - lld ${{ c_compiler_version }}.*\n        - llvm-tools ${{ c_compiler_version }}.*\n  host:\n    - zstd\n  run:\n    # OCaml runtime links against zstd for compressed marshaling\n    - zstd\n\ntests:\n  - package_contents:\n      bin:\n        - ocaml\n        - ocamlc\n        - ocamlc.byte\n        - ocamlc.opt\n        - ocamlcmt\n        - ocamlcp\n        - ocamldep\n        - ocamldep.byte\n        - ocamldep.opt\n        - ocamllex\n        - ocamllex.byte\n        - ocamllex.opt\n        - ocamlmklib\n        - ocamlmktop\n        - ocamlobjinfo\n        - ocamlobjinfo.byte\n        - ocamlobjinfo.opt\n        - ocamlopt\n        - ocamlopt.byte\n        - ocamlopt.opt\n        - ocamloptp\n        - ocamlprof\n        - ocamlrun\n        - ocamlrund\n        - ocamlyacc\n        - if: build_platform == target_platform\n          then:\n            - ocamldebug\n            - ocamldoc\n            - ocamldoc.opt\n        - if: linux and x86_64\n          then:\n            - aarch64-conda-linux-gnu-ocamlc\n            - aarch64-conda-linux-gnu-ocamldep\n            - aarch64-conda-linux-gnu-ocamlobjinfo\n            - aarch64-conda-linux-gnu-ocamlopt\n            - powerpc64le-conda-linux-gnu-ocamlc\n            - powerpc64le-conda-linux-gnu-ocamldep\n            - powerpc64le-conda-linux-gnu-ocamlobjinfo\n            - powerpc64le-conda-linux-gnu-ocamlopt\n        - if: osx and x86_64\n          then:\n            - arm64-apple-darwin20.0.0-ocamlc\n            - arm64-apple-darwin20.0.0-ocamldep\n            - arm64-apple-darwin20.0.0-ocamlobjinfo\n            - arm64-apple-darwin20.0.0-ocamlopt\n        - if: unix\n          then:\n            - ocamlruni\n          else:\n            - flexlink\n            - flexlink.byte\n            - flexlink.opt\n      lib:\n      files:\n        - etc/conda/activate.d/ocaml_activate.${{ sh }}\n        - etc/conda/deactivate.d/ocaml_deactivate.${{ sh }}\n        - ${{ library }}lib/ocaml/ld.conf\n        - ${{ library }}lib/ocaml/libasmrun.a\n        - ${{ library }}lib/ocaml/Makefile.config\n        - ${{ library }}lib/ocaml/runtime-launch-info\n        - ${{ library }}lib/ocaml/*.a\n        - ${{ library }}lib/ocaml/*.cma\n        - ${{ library }}lib/ocaml/*.cmi\n        - ${{ library }}lib/ocaml/*.cmo\n        - ${{ library }}lib/ocaml/*.cmt\n        - ${{ library }}lib/ocaml/*.cmti\n        - ${{ library }}lib/ocaml/*.cmx\n        - ${{ library }}lib/ocaml/*.cmxa\n        - ${{ library }}lib/ocaml/*.ml\n        - ${{ library }}lib/ocaml/*.mli\n        - ${{ library }}lib/ocaml/*.o\n        - ${{ library }}lib/ocaml/caml/*.h\n        - ${{ library }}lib/ocaml/compiler-libs/*\n        - ${{ library }}lib/ocaml/dynlink/*\n        - ${{ library }}lib/ocaml/profiling/*\n        - ${{ library }}lib/ocaml/str/*\n        - ${{ library }}lib/ocaml/threads/*\n        - ${{ library }}lib/ocaml/unix/*\n        - ${{ library }}lib/ocaml/stublibs/dll*.${{ so }}\n        - ${{ library }}share/doc/ocaml/*\n        - if: (build_platform == target_platform) and unix\n          then:\n            - ${{ library }}lib/ocaml/ocamldoc/*\n            - share/man/man{1,3}/*\n        - if: linux and x86_64\n          then:\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o\n            - ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.${{ so }}\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa\n            - ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.${{ so }}\n        - if: osx and x86_64\n          then:\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamlc.opt\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamldep.opt\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamlobjinfo.opt\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/bin/ocamlopt.opt\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/libasmrun.a\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/runtime-launch-info\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/*.cma\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/*.cmi\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/*.cmo\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/*.cmx\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/*.cmxa\n            - ocaml-cross-compilers/arm64-apple-darwin20.0.0/lib/ocaml/stublibs/dll*.${{ so }}\n\n  - script:\n      - echo \"=== Env., Resource files ===\"\n      - if: unix\n        then: |\n          echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\n          head -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\n          head -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\n          cat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\n          STDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\n          CC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n        else: |\n          echo \"%OCAMLLIB%\" | grep ocaml\n          echo \"%PATH%\" | grep ocaml\n      - echo \"PREFIX/PATH tests passed\"\n    requirements:\n      run:\n        - ${{ m2 }}grep\n\n  - script:\n      - echo \"=== Check cross-binaries for correct arch ===\"\n      - if: build_platform != target_platform\n        then:\n          - if: aarch64\n            then:\n              - readelf -h ${PREFIX}/bin/ocamlc.opt | grep -q \"AArch64\" || { echo \"ocamlc.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamlopt.opt | grep -q \"AArch64\" || { echo \"ocamlopt.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamllex.opt | grep -q \"AArch64\" || { echo \"ocamllex.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamldep.opt | grep -q \"AArch64\" || { echo \"ocamldep.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamlobjinfo.opt | grep -q \"AArch64\" || { echo \"ocamlobjinfo.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamlrun | grep -q \"AArch64\" || { echo \"ocamlrun: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/lib/ocaml/libasmrun_shared.so | grep -q \"AArch64\" || { echo \"libasmrun_shared.so: Bad Arch\"; exit 1; }\n          - if: arm64\n            then:\n              - otool -hv ${PREFIX}/bin/ocamlc.opt | grep -iq \"ARM64\" || { echo \"ocamlc.opt: Bad Arch\"; exit 1; }\n              - otool -hv ${PREFIX}/bin/ocamlopt.opt | grep -iq \"ARM64\" || { echo \"ocamlopt.opt: Bad Arch\"; exit 1; }\n              - otool -hv ${PREFIX}/bin/ocamllex.opt | grep -iq \"ARM64\" || { echo \"ocamllex.opt: Bad Arch\"; exit 1; }\n              - otool -hv ${PREFIX}/bin/ocamldep.opt | grep -iq \"ARM64\" || { echo \"ocamldep.opt: Bad Arch\"; exit 1; }\n              - otool -hv ${PREFIX}/bin/ocamlobjinfo.opt | grep -iq \"ARM64\" || { echo \"ocamlobjinfo.opt: Bad Arch\"; exit 1; }\n              - otool -hv ${PREFIX}/bin/ocamlrun | grep -iq \"ARM64\" || { echo \"ocamlrun: Bad Arch\"; exit 1; }\n              - otool -hv ${PREFIX}/lib/ocaml/libasmrun_shared.dylib | grep -iq \"ARM64\" || { echo \"libasmrun_shared: Bad Arch\"; exit 1; }\n          - if: ppc64le\n            then:\n              - readelf -h ${PREFIX}/bin/ocamlc.opt | grep -q \"PowerPC64\" || { echo \"ocamlc.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamlopt.opt | grep -q \"PowerPC64\" || { echo \"ocamlopt.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamllex.opt | grep -q \"PowerPC64\" || { echo \"ocamllex.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamldep.opt | grep -q \"PowerPC64\" || { echo \"ocamldep.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamlobjinfo.opt | grep -q \"PowerPC64\" || { echo \"ocamlobjinfo.opt: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/bin/ocamlrun | grep -q \"PowerPC64\" || { echo \"ocamlrun: Bad Arch\"; exit 1; }\n              - readelf -h ${PREFIX}/lib/ocaml/libasmrun_shared.so | grep -q \"PowerPC64\" || { echo \"libasmrun_shared.so: Bad Arch\"; exit 1; }\n          - echo \"All cross-compiled binaries: CORRECT architecture \"\n        else:\n          echo \"Native build (no cross-compilation check needed)\"\n\n  - script:\n      env:\n        OCAMLRUNPARAM: \"s=4M,o=1000\"\n      content:\n        - echo \"=== All binaries version/info output ===\"\n        - if: arm64\n          then:\n            - echo \"Skipped test for ARM64\"\n          else: |\n            echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\n            echo \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\n            echo \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\n            echo \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\n            echo \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\n            echo \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\n            echo \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\n            echo \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\n            echo \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\n            echo \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\n            echo \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\n            echo \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n        - if: unix and not arm64\n          then: |\n            echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\n            echo \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\n            echo \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\n            echo \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n        - if: not unix\n          then: |\n            echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help\n            echo \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help\n            echo \"Testing ocamlcmt...\" && ocamlcmt -help\n            echo \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help\n        - if: build_platform == target_platform\n          then: |\n            echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\n            echo \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\n            echo \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n        - if: linux and x86_64\n          then: |\n            echo \"Testing aarch64 cross-compilers...\"\n            echo \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\n            echo \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\n            echo \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\n            echo \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n            echo \"Testing ppc64le cross-compilers...\"\n            echo \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\n            echo \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\n            echo \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\n            echo \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n        - if: osx and x86_64\n          then: |\n            echo \"Testing arm64 cross-compilers...\"\n            echo \"  ocamlc...\" && arm64-apple-darwin20.0.0-ocamlc -version | grep ${{ version }}\n            echo \"  ocamldep...\" && arm64-apple-darwin20.0.0-ocamldep -version | grep ${{ version }}\n            echo \"  ocamlobjinfo...\" && arm64-apple-darwin20.0.0-ocamlobjinfo -help | grep -q FILES\n            echo \"  ocamlopt...\" && arm64-apple-darwin20.0.0-ocamlopt -version | grep ${{ version }}\n    requirements:\n      run:\n        - ${{ m2 }}grep\n\n  - script:\n      env:\n        OCAMLRUNPARAM: \"s=4M,o=1000\"\n      content:\n        - echo \"=== Exercise compilers with actual code ===\"\n        - if: arm64\n          then:\n            - echo \"Skipped test for ARM64\"\n          else:\n            - printf 'print_endline \"Hello World\"\\n' > hi.ml\n            - if: unix\n              then: |\n                  # 1. Bytecode compilation + execution\n                  echo \"=== Testing bytecode compilation ===\"\n                  ocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n                  (mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\n                  ocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n                  # 2. Native compilation + execution\n                  echo \"=== Testing native compilation ===\"\n                  ocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n                  # 3. REPL test (ocaml toplevel)\n                  echo \"=== Testing REPL ===\"\n                  echo 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n                  # 4. ocamldep actually parsing files\n                  echo \"=== Testing ocamldep ===\"\n                  ocamldep hi.ml\n \n                  # 5. Multi-file compilation (exercises module system)\n                  echo \"=== Testing multi-file compilation ===\"\n                  printf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\n                  printf 'let () = Lib.greet ()\\n' > main.ml\n                  ocamlc -c lib.ml\n                  ocamlc -c main.ml\n                  ocamlc -o multi lib.cmo main.cmo\n                  ./multi | grep \"From Lib\"\n\n                  echo \"=== Bytecode compiler via ocamlrun ===\"\n                  ocamlrun ${PREFIX}/bin/ocamlc.byte -version\n                  printf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\n                  echo \"=== All compilation tests passed ===\"\n              else:\n                - ocamlc -o hi.exe hi.ml && hi.exe | grep Hello && rm hi.exe\n    requirements:\n      run:\n        - ${{ c_compiler }}_impl_${{ target_platform }} >=${{ c_compiler_version }}\n        - ${{ m2 }}file\n        - ${{ m2 }}grep\n        - if: osx\n          then:\n            - lld >=${{ c_compiler_version }}\n            - llvm-tools >=${{ c_compiler_version }}\n\n  - script:\n      env:\n        OCAMLRUNPARAM: \"s=4M,o=1000\"\n      content:\n        - echo \"=== Exercise cross-compilers with actual code ===\"\n        - if: linux and x86_64\n          then: |\n            echo \"=== Testing cross-compiler compilation ===\"\n            printf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\n            aarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\n            QEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\n            printf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\n            powerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n            # QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n          else:\n            - echo \"No cross-compiler tests\"\n    requirements:\n      run:\n        - if: linux and x86_64\n          then:\n            - ${{ c_compiler }}_impl_linux-64 >=${{ c_compiler_version }}\n            - ${{ c_compiler }}_impl_linux-aarch64 ${{ c_compiler_version }}.*\n            - ${{ c_compiler }}_impl_linux-ppc64le ${{ c_compiler_version }}.*\n            - ${{ c_stdlib }}_linux-64 >=${{ c_stdlib_version }}\n            - ${{ c_stdlib }}_linux-aarch64 >=${{ c_stdlib_version }}\n            - ${{ c_stdlib }}_linux-ppc64le >=${{ c_stdlib_version }}\n            - binutils_impl_linux-aarch64\n            - binutils_impl_linux-ppc64le\n            - qemu-execve-aarch64\n            - qemu-execve-ppc64le\n\nabout:\n  homepage: https://ocaml.org/\n  license: LGPL-2.1-only WITH OCaml-LGPL-linking-exception\n  license_family: LGPL\n  license_file: LICENSE\n  summary: Objective Caml (OCaml) is an implementation of the ML language.\n  description: |\n    OCaml is an implementation of the ML language, based on the Caml Light\n    dialect extended with a complete class-based object system and a powerful\n    module system in the style of Standard ML.\n\n    OCaml comprises two compilers. One generates bytecode which is then\n    interpreted by a C program. This compiler runs quickly, generates compact\n    code with moderate memory requirements, and is portable to essentially any\n    32 or 64 bit Unix platform. Performance of generated programs is quite good\n    for a bytecoded implementation.  This compiler can be used either as a\n    standalone, batch-oriented compiler that produces standalone programs, or as\n    an interactive, toplevel-based system.\n\n    The other compiler generates high-performance native code for a number of\n    processors. Compilation takes longer and generates bigger code, but the\n    generated programs deliver excellent performance, while retaining the\n    moderate memory requirements of the bytecode compiler.\n  documentation: https://ocaml.org/docs/\n  repository: https://github.com/ocaml/ocaml\n\nextra:\n  recipe-maintainers:\n    - isuruf\n    - dslarm\n    - MementoRC\n",
  "req": {
    "__set__": true,
    "elements": [
      "bash",
      "binutils",
      "binutils_impl_linux-aarch64",
      "binutils_impl_linux-ppc64le",
      "c_compiler_stub",
      "c_stdlib_stub",
      "clang_impl_linux-aarch64",
      "clang_impl_linux-ppc64le",
      "file",
      "findutils",
      "gawk",
      "gcc_impl_linux-aarch64",
      "gcc_impl_linux-ppc64le",
      "grep",
      "m2w64-sysroot_linux-aarch64",
      "m2w64-sysroot_linux-ppc64le",
      "macosx_deployment_target_linux-aarch64",
      "macosx_deployment_target_linux-ppc64le",
      "make",
      "pkgconfig",
      "sed",
      "sysroot_linux-aarch64",
      "sysroot_linux-ppc64le",
      "zstd"
    ]
  },
  "requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "clang_impl_linux-aarch64",
        "clang_impl_linux-ppc64le",
        "file",
        "findutils",
        "gawk",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "m2w64-sysroot_linux-aarch64",
        "m2w64-sysroot_linux-ppc64le",
        "macosx_deployment_target_linux-aarch64",
        "macosx_deployment_target_linux-ppc64le",
        "make",
        "pkgconfig",
        "sed",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "ctng-compiler-activation",
        "ctng-compilers",
        "linux-sysroot",
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "ctng-compiler-activation",
        "ctng-compilers",
        "linux-sysroot",
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "clang_impl_linux-64",
        "clang_impl_linux-aarch64",
        "clang_impl_linux-ppc64le",
        "file",
        "gcc_impl_linux-64",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "m2w64-sysroot_linux-64",
        "m2w64-sysroot_linux-aarch64",
        "m2w64-sysroot_linux-ppc64le",
        "macosx_deployment_target_linux-64",
        "macosx_deployment_target_linux-aarch64",
        "macosx_deployment_target_linux-ppc64le",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le",
        "sysroot_linux-64",
        "sysroot_linux-aarch64",
        "sysroot_linux-ppc64le"
      ]
    }
  },
  "strong_exports": false,
  "total_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash >=5.2",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "clang_impl_linux-aarch64 19.*",
        "clang_impl_linux-ppc64le 19.*",
        "file",
        "findutils",
        "gawk",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "grep",
        "m2w64-sysroot_linux-aarch64 12.*",
        "m2w64-sysroot_linux-ppc64le 12.*",
        "macosx_deployment_target_linux-aarch64 11.0.*",
        "macosx_deployment_target_linux-ppc64le 11.0.*",
        "make",
        "pkgconfig",
        "sed",
        "sysroot_linux-aarch64 2.17.*",
        "sysroot_linux-ppc64le 2.17.*"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "clang_impl_linux-64 >=19",
        "clang_impl_linux-aarch64 19.*",
        "clang_impl_linux-ppc64le 19.*",
        "file",
        "gcc_impl_linux-64 >=14",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "grep",
        "m2w64-sysroot_linux-64 >=12",
        "m2w64-sysroot_linux-aarch64 >=12",
        "m2w64-sysroot_linux-ppc64le >=12",
        "macosx_deployment_target_linux-64 >=11.0",
        "macosx_deployment_target_linux-aarch64 >=11.0",
        "macosx_deployment_target_linux-ppc64le >=11.0",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le",
        "sysroot_linux-64 >=2.17",
        "sysroot_linux-aarch64 >=2.17",
        "sysroot_linux-ppc64le >=2.17"
      ]
    }
  },
  "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz",
  "version": "5.3.0",
  "version_pr_info": {
    "__lazy_json__": "version_pr_info/ocaml.json"
  },
  "win_64_meta_yaml": {
    "about": {
      "description": "OCaml is an implementation of the ML language, based on the Caml Light\ndialect extended with a complete class-based object system and a powerful\nmodule system in the style of Standard ML.\n\nOCaml comprises two compilers. One generates bytecode which is then\ninterpreted by a C program. This compiler runs quickly, generates compact\ncode with moderate memory requirements, and is portable to essentially any\n32 or 64 bit Unix platform. Performance of generated programs is quite good\nfor a bytecoded implementation.  This compiler can be used either as a\nstandalone, batch-oriented compiler that produces standalone programs, or as\nan interactive, toplevel-based system.\n\nThe other compiler generates high-performance native code for a number of\nprocessors. Compilation takes longer and generates bigger code, but the\ngenerated programs deliver excellent performance, while retaining the\nmoderate memory requirements of the bytecode compiler.",
      "dev_url": "https://github.com/ocaml/ocaml",
      "doc_url": "https://ocaml.org/docs/",
      "home": "https://ocaml.org/",
      "license": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_family": "LGPL-2.1-only WITH OCaml-LGPL-linking-exception",
      "license_file": "LICENSE",
      "summary": "Objective Caml (OCaml) is an implementation of the ML language."
    },
    "build": {
      "number": "1",
      "run_exports": {
        "weak": [
          "ocaml"
        ]
      },
      "script": {
        "env": {
          "ARM64_SDK": "11.0",
          "SKIP_MAKE_TESTS": "1"
        }
      }
    },
    "extra": {
      "recipe-maintainers": [
        "isuruf",
        "dslarm",
        "MementoRC"
      ]
    },
    "outputs": [
      {
        "build": {
          "strong": [],
          "weak": [
            "ocaml"
          ]
        },
        "name": "ocaml",
        "requirements": {
          "build": [
            "c_compiler_stub",
            "c_stdlib_stub",
            "bash >=5.2",
            "file",
            "findutils",
            "gawk",
            "grep",
            "make",
            "sed",
            "binutils",
            "pkgconfig",
            "gcc_impl_linux-aarch64 14.*",
            "gcc_impl_linux-ppc64le 14.*",
            "m2w64-sysroot_linux-aarch64 12.*",
            "m2w64-sysroot_linux-ppc64le 12.*",
            "binutils_impl_linux-aarch64",
            "binutils_impl_linux-ppc64le"
          ],
          "host": [
            "zstd"
          ],
          "run": [
            "zstd"
          ]
        },
        "tests": [
          {
            "package_contents": {
              "bin": [
                "ocaml",
                "ocamlc",
                "ocamlc.byte",
                "ocamlc.opt",
                "ocamlcmt",
                "ocamlcp",
                "ocamldep",
                "ocamldep.byte",
                "ocamldep.opt",
                "ocamllex",
                "ocamllex.byte",
                "ocamllex.opt",
                "ocamlmklib",
                "ocamlmktop",
                "ocamlobjinfo",
                "ocamlobjinfo.byte",
                "ocamlobjinfo.opt",
                "ocamlopt",
                "ocamlopt.byte",
                "ocamlopt.opt",
                "ocamloptp",
                "ocamlprof",
                "ocamlrun",
                "ocamlrund",
                "ocamlyacc",
                "ocamldebug",
                "ocamldoc",
                "ocamldoc.opt",
                "aarch64-conda-linux-gnu-ocamlc",
                "aarch64-conda-linux-gnu-ocamldep",
                "aarch64-conda-linux-gnu-ocamlobjinfo",
                "aarch64-conda-linux-gnu-ocamlopt",
                "powerpc64le-conda-linux-gnu-ocamlc",
                "powerpc64le-conda-linux-gnu-ocamldep",
                "powerpc64le-conda-linux-gnu-ocamlobjinfo",
                "powerpc64le-conda-linux-gnu-ocamlopt",
                "ocamlruni"
              ],
              "files": [
                "etc/conda/activate.d/ocaml_activate.sh",
                "etc/conda/deactivate.d/ocaml_deactivate.sh",
                "lib/ocaml/ld.conf",
                "lib/ocaml/libasmrun.a",
                "lib/ocaml/Makefile.config",
                "lib/ocaml/runtime-launch-info",
                "lib/ocaml/*.a",
                "lib/ocaml/*.cma",
                "lib/ocaml/*.cmi",
                "lib/ocaml/*.cmo",
                "lib/ocaml/*.cmt",
                "lib/ocaml/*.cmti",
                "lib/ocaml/*.cmx",
                "lib/ocaml/*.cmxa",
                "lib/ocaml/*.ml",
                "lib/ocaml/*.mli",
                "lib/ocaml/*.o",
                "lib/ocaml/caml/*.h",
                "lib/ocaml/compiler-libs/*",
                "lib/ocaml/dynlink/*",
                "lib/ocaml/profiling/*",
                "lib/ocaml/str/*",
                "lib/ocaml/threads/*",
                "lib/ocaml/unix/*",
                "lib/ocaml/stublibs/dll*.so",
                "share/doc/ocaml/*",
                "lib/ocaml/ocamldoc/*",
                "share/man/man{1,3}/*",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.a",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/*.o",
                "ocaml-cross-compilers/aarch64-conda-linux-gnu/lib/ocaml/stublibs/dll*.so",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlc.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamldep.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlobjinfo.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/bin/ocamlopt.opt",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/libasmrun.a",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/runtime-launch-info",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cma",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmi",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmo",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmx",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/*.cmxa",
                "ocaml-cross-compilers/powerpc64le-conda-linux-gnu/lib/ocaml/stublibs/dll*.so"
              ]
            }
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": [
              "echo \"=== Env., Resource files ===\"",
              "echo \"${OCAMLLIB:-'UNSET'}\" | grep ocaml > /dev/null && { echo \"OCAMLLIB set\"; }\nhead -2 ${PREFIX}/lib/ocaml/runtime-launch-info | grep ${PREFIX} > /dev/null && { echo \"runtime-launch-info clean\"; }\nhead -2 ${PREFIX}/lib/ocaml/ld.conf | grep ${PREFIX} > /dev/null && { echo \"ld.conf clean\"; }\ncat ${PREFIX}/lib/ocaml/Makefile.config | grep ${PREFIX} > /dev/null && { echo \"Makefile.config clean\"; }\nSTDLIB_PATH=$(ocamlc.opt -config-var standard_library) && echo \"standard_library=$STDLIB_PATH\"\nCC_PATH=$(ocamlc.opt -config-var c_compiler) && echo \"c_compiler=$CC_PATH\"\n",
              "echo \"PREFIX/PATH tests passed\""
            ]
          },
          {
            "script": [
              "echo \"=== Check cross-binaries for correct arch ===\"",
              "echo \"Native build (no cross-compilation check needed)\""
            ]
          },
          {
            "requirements": {
              "run": [
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== All binaries version/info output ===\"",
                "echo \"Testing ocamlc...\" && ocamlc -version | grep ${{ version }}\necho \"Testing ocamldep...\" && ocamldep -version | grep ${{ version }}\necho \"Testing ocamllex...\" && ocamllex -version | grep ${{ version }}\necho \"Testing ocamlrun...\" && ocamlrun -version | grep ${{ version }}\necho \"Testing ocamlyacc...\" && ocamlyacc -version | grep ${{ version }}\n\necho \"Testing ocaml...\" && ocaml -version | grep ${{ version }}\necho \"Testing ocamlcp...\" && ocamlcp -version | grep ${{ version }}\necho \"Testing ocamlmklib...\" && ocamlmklib -version | grep ${{ version }}\necho \"Testing ocamlmktop...\" && ocamlmktop -version | grep ${{ version }}\necho \"Testing ocamloptp...\" && ocamloptp -version | grep ${{ version }}\necho \"Testing ocamlprof...\" && ocamlprof -version | grep ${{ version }}\n\necho \"Testing ocamlopt...\" && ocamlopt -version | grep ${{ version }}\n",
                "echo \"Testing ocamlobjinfo...\" && ocamlobjinfo -help | grep -q FILES\necho \"Testing ocamlobjinfo.opt...\" && ocamlobjinfo.opt -help | grep -q FILES\necho \"Testing ocamlcmt...\" && ocamlcmt -help | grep -q FILE\necho \"Testing ocamlobjinfo.byte...\" && ocamlobjinfo.byte -help | grep -q FILES\n",
                "echo \"Testing ocamldoc...\" && ocamldoc -version | grep ${{ version }}\necho \"Testing ocamldoc.opt...\" && ocamldoc.opt -version | grep ${{ version }}\necho \"Testing ocamldebug...\" && ocamldebug -version | grep ${{ version }}\n",
                "echo \"Testing aarch64 cross-compilers...\"\necho \"  ocamlc...\" && aarch64-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && aarch64-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && aarch64-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && aarch64-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\necho \"Testing ppc64le cross-compilers...\"\necho \"  ocamlc...\" && powerpc64le-conda-linux-gnu-ocamlc -version | grep ${{ version }}\necho \"  ocamldep...\" && powerpc64le-conda-linux-gnu-ocamldep -version | grep ${{ version }}\necho \"  ocamlobjinfo...\" && powerpc64le-conda-linux-gnu-ocamlobjinfo -help | grep -q FILES\necho \"  ocamlopt...\" && powerpc64le-conda-linux-gnu-ocamlopt -version | grep ${{ version }}\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "file",
                "grep"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise compilers with actual code ===\"",
                "printf 'print_endline \"Hello World\"\\n' > hi.ml",
                "# 1. Bytecode compilation + execution\necho \"=== Testing bytecode compilation ===\"\nocamlc -o hi hi.ml && ./hi | grep \"Hello World\"\n(mkdir -p tmp && cp hi tmp && (cd tmp; ./hi)) | grep \"Hello World\" && rm ./hi\nocamlrun ${PREFIX}/bin/ocamlc.byte -version | grep ${{ version }}\n\n# 2. Native compilation + execution\necho \"=== Testing native compilation ===\"\nocamlopt -o hi hi.ml && ./hi | grep \"Hello World\" && rm ./hi\n\n# 3. REPL test (ocaml toplevel)\necho \"=== Testing REPL ===\"\necho 'print_endline \"REPL works\";;' | ocaml 2>&1 || echo \"REPL exit: $?\"\n\n# 4. ocamldep actually parsing files\necho \"=== Testing ocamldep ===\"\nocamldep hi.ml\n\n# 5. Multi-file compilation (exercises module system)\necho \"=== Testing multi-file compilation ===\"\nprintf 'let greet () = print_endline \"From Lib\"\\n' > lib.ml\nprintf 'let () = Lib.greet ()\\n' > main.ml\nocamlc -c lib.ml\nocamlc -c main.ml\nocamlc -o multi lib.cmo main.cmo\n./multi | grep \"From Lib\"\n\necho \"=== Bytecode compiler via ocamlrun ===\"\nocamlrun ${PREFIX}/bin/ocamlc.byte -version\nprintf 'print_endline \"Hi CF\"\\n' > hi.ml && ocamlrun ${PREFIX}/bin/ocamlc.byte -o hi hi.ml && ./hi && rm ./hi\n\necho \"=== All compilation tests passed ===\"\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          },
          {
            "requirements": {
              "run": [
                "gcc_impl_linux-64 >=14",
                "gcc_impl_linux-aarch64 14.*",
                "gcc_impl_linux-ppc64le 14.*",
                "m2w64-sysroot_linux-64 >=12",
                "m2w64-sysroot_linux-aarch64 >=12",
                "m2w64-sysroot_linux-ppc64le >=12",
                "binutils_impl_linux-aarch64",
                "binutils_impl_linux-ppc64le",
                "qemu-execve-aarch64",
                "qemu-execve-ppc64le"
              ]
            },
            "script": {
              "content": [
                "echo \"=== Exercise cross-compilers with actual code ===\"",
                "echo \"=== Testing cross-compiler compilation ===\"\nprintf 'print_endline \"Hello World from AARCH64\"\\n' > hi.ml\naarch64-conda-linux-gnu-ocamlopt -o hi hi.ml\nQEMU_LD_PREFIX=${PREFIX}/aarch64-conda-linux-gnu/sysroot qemu-execve-aarch64 ./hi | grep \"Hello World\" && rm ./hi\nprintf 'print_endline \"Hello World from PPC64LE\"\\n' > hi.ml\npowerpc64le-conda-linux-gnu-ocamlopt -o hi hi.ml\n# QEMU_CPU=power9 QEMU_LD_PREFIX=${PREFIX}/powerpc64le-conda-linux-gnu/sysroot qemu-execve-ppc64le ./hi | grep \"Hello World\" && rm ./hi\n"
              ],
              "env": {
                "OCAMLRUNPARAM": "s=4M,o=1000"
              }
            }
          }
        ],
        "version": "5.3.0"
      }
    ],
    "package": {
      "name": "ocaml",
      "version": "5.3.0"
    },
    "requirements": {
      "build": [
        "c_compiler_stub",
        "c_stdlib_stub",
        "bash >=5.2",
        "file",
        "findutils",
        "gawk",
        "grep",
        "make",
        "sed",
        "binutils",
        "pkgconfig",
        "gcc_impl_linux-aarch64 14.*",
        "gcc_impl_linux-ppc64le 14.*",
        "m2w64-sysroot_linux-aarch64 12.*",
        "m2w64-sysroot_linux-ppc64le 12.*",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le"
      ],
      "host": [
        "zstd"
      ],
      "run": [
        "zstd"
      ]
    },
    "schema_version": 1,
    "source": {
      "sha256": "eb9eab2f21758d3cfb1e78c7f83f0b4dd6302824316aba4abee047a5a4f85029",
      "url": "https://github.com/ocaml/ocaml/archive/refs/tags/5.3.0.tar.gz"
    }
  },
  "win_64_requirements": {
    "build": {
      "__set__": true,
      "elements": [
        "bash",
        "binutils",
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "c_compiler_stub",
        "c_stdlib_stub",
        "file",
        "findutils",
        "gawk",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "m2w64-sysroot_linux-aarch64",
        "m2w64-sysroot_linux-ppc64le",
        "make",
        "pkgconfig",
        "sed"
      ]
    },
    "host": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "run": {
      "__set__": true,
      "elements": [
        "zstd"
      ]
    },
    "test": {
      "__set__": true,
      "elements": [
        "binutils_impl_linux-aarch64",
        "binutils_impl_linux-ppc64le",
        "file",
        "gcc_impl_linux-64",
        "gcc_impl_linux-aarch64",
        "gcc_impl_linux-ppc64le",
        "grep",
        "m2w64-sysroot_linux-64",
        "m2w64-sysroot_linux-aarch64",
        "m2w64-sysroot_linux-ppc64le",
        "qemu-execve-aarch64",
        "qemu-execve-ppc64le"
      ]
    }
  }
}